# # --- RED COLOR ---
# apiVersion: apps/v1
# kind: Deployment
# metadata:
#   name: red-color
# spec:
#   replicas: 3
#   selector:
#     matchLabels:
#       app: red-color
#   template:
#     metadata:
#       labels:
#         app: red-color
#         color-group: lights # Etiqueta compartida para el switch
#     spec:
#       containers:
#       - name: color
#         image: sbeliakou/color:v1
#         env:
#         - name: COLOR
#           value: red
# ---
# apiVersion: v1
# kind: Service
# metadata:
#   name: red-svc
# spec:
#   type: ClusterIP
#   selector:
#     app: red-color
#   ports:
#   - port: 8080
#     targetPort: 80 # La imagen sbeliakou/color escucha en el 80
# ---
# # --- GREEN COLOR ---
# apiVersion: apps/v1
# kind: Deployment
# metadata:
#   name: green-color
# spec:
#   replicas: 1
#   selector:
#     matchLabels:
#       app: green-color
#   template:
#     metadata:
#       labels:
#         app: green-color
#         color-group: lights # Etiqueta compartida
#     spec:
#       containers:
#       - name: color
#         image: sbeliakou/color:v1
#         env:
#         - name: COLOR
#           value: green
# ---
# apiVersion: v1
# kind: Service
# metadata:
#   name: green-svc
# spec:
#   type: ClusterIP
#   selector:
#     app: green-color
#   ports:
#   - port: 8080
#     targetPort: 80
# ---
# # --- YELLOW COLOR ---
# apiVersion: apps/v1
# kind: Deployment
# metadata:
#   name: yellow-color
# spec:
#   replicas: 2
#   selector:
#     matchLabels:
#       app: yellow-color
#   template:
#     metadata:
#       labels:
#         app: yellow-color
#         color-group: lights # Etiqueta compartida
#     spec:
#       containers:
#       - name: color
#         image: sbeliakou/color:v1
#         env:
#         - name: COLOR
#           value: yellow
# ---
# apiVersion: v1
# kind: Service
# metadata:
#   name: yellow-svc
# spec:
#   type: ClusterIP
#   selector:
#     app: yellow-color
#   ports:
#   - port: 8080
#     targetPort: 80
# ---
# # --- SERVICE SWITCH ---
# apiVersion: v1
# kind: Service
# metadata:
#   name: switch
# spec:
#   type: ClusterIP
#   selector:
#     color-group: lights # Selecciona TODOS los pods anteriores
#   ports:
#   - port: 80
#     targetPort: 80
# ---
# # --- INGRESS LIGHTS ---
# apiVersion: networking.k8s.io/v1
# kind: Ingress
# metadata:
#   name: lights-ingress
#   annotations:
#     nginx.ingress.kubernetes.io/rewrite-target: /
# spec:
#   ingressClassName: nginx
#   rules:
#   - host: lights.k8slab.net
#     http:
#       paths:
#       - path: /red
#         pathType: Prefix
#         backend:
#           service:
#             name: red-svc
#             port:
#               number: 8080
#       - path: /green
#         pathType: Prefix
#         backend:
#           service:
#             name: green-svc
#             port:
#               number: 8080
#       - path: /yellow
#         pathType: Prefix
#         backend:
#           service:
#             name: yellow-svc
#             port:
#               number: 8080
#       - path: /
#         pathType: Prefix
#         backend:
#           service:
#             name: switch
#             port:
#               number: 80